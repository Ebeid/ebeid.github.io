---
title: "Python Notes â€“ 7 : Files & directories"
date: '2009-03-23T10:12:00.002-05:00'

tags:
- Python
modified_time: '2009-05-15T01:57:36.571-05:00'
blogger_id: tag:blogger.com,1999:blog-59384554657271185.post-8598980118992725030
blogger_orig_url: http://ebeid-soliman.blogspot.com/2009/03/python-notes-7.html
---

<p>Welcome to our seventh note in our Python learning process. This note will talk specifically about files, directories, and exceptions.</p>  <h4>Files</h4>  <p>Opening a file creates a file object. Syntax is like that:</p>  <blockquote>   <p><span style="color: #0000ff">&gt;&gt;&gt; f = open(&quot;test.dat&quot;,&quot;w&quot;)</span></p> </blockquote>  <blockquote>   <p><span style="color: #0000ff">&gt;&gt;&gt; print f</span></p> </blockquote>  <blockquote>   <p><span style="color: #0000ff">&lt;open file 'test.dat', mode 'w' at fe820&gt;</span></p> </blockquote>  <p>The first parameter to open is the file name, the second parameter is the mode. Modes are: w for write, r for read.</p>  <p>To write data in the file we invoke the write method on the file object:</p>  <blockquote>   <p><span style="color: #0000ff">&gt;&gt;&gt; f.write(&quot;Now is the time&quot;)</span></p> </blockquote>  <blockquote>   <p><span style="color: #0000ff">&gt;&gt;&gt; f.write(&quot;to close the file&quot;)</span></p> </blockquote>  <p>After we done we can close the file like that:</p>  <blockquote>   <p><span style="color: #0000ff">&gt;&gt;&gt; f.close()</span></p> </blockquote>  <p>The read method reads data from the file. With no arguments, it reads the entire contents of the file:</p>  <blockquote>   <p><span style="color: #0000ff">&gt;&gt;&gt; text = f.read()</span></p> </blockquote>  <blockquote>   <p><span style="color: #0000ff">&gt;&gt;&gt; print text</span></p> </blockquote>  <blockquote>   <p><span style="color: #0000ff">Now is the time to close the file</span></p> </blockquote>  <p>read can also take an argument that indicates how many characters to read.</p>  <p>If not enough characters are left in the file, read returns the remaining characters. When we get to the end of the file, read returns the empty string:</p>  <blockquote>   <p><span style="color: #0000ff">&gt;&gt;&gt; print f.read(5)</span></p> </blockquote>  <blockquote>   <p><span style="color: #0000ff">Now i</span></p> </blockquote>  <blockquote>   <p><span style="color: #0000ff">&gt;&gt;&gt; print f.read(1000006)</span></p> </blockquote>  <blockquote>   <p><span style="color: #0000ff">s the timeto close the file</span></p> </blockquote>  <blockquote>   <p><span style="color: #0000ff">&gt;&gt;&gt; print f.read()</span></p> </blockquote>  <blockquote>   <p><span style="color: #0000ff">&gt;&gt;&gt;</span></p> </blockquote>  <p>The write method write data to the file. It takes strings only.</p>  <blockquote>   <p><span style="color: #0000ff">&gt;&gt;&gt; x = 52</span></p> </blockquote>  <blockquote>   <p><span style="color: #0000ff">&gt;&gt;&gt; f.write (str(x))</span></p> </blockquote>  <p></p>  <h4>Directories</h4>  <p>When you create a new file by opening it and writing, the new file goes in the current directory (wherever you were when you ran the program). Similarly, when you open a file for reading, Python looks for it in the current directory. If you want to open a file somewhere else, you have to specify the path to the file, which is the name of the directory (or folder) where the file is located:</p>  <blockquote>   <p><span style="color: #0000ff">&gt;&gt;&gt; f = open(&quot;/usr/share/dict/words&quot;,&quot;r&quot;)</span></p> </blockquote>  <blockquote>   <p><span style="color: #0000ff">&gt;&gt;&gt; print f.readline()</span></p> </blockquote>  <blockquote>   <p><span style="color: #0000ff">Whatever exist</span></p> </blockquote>  <h4>glob module</h4>  <p>Returns filenames in a directory that match a pattern. </p>  <blockquote>   <p><span style="color: #0000ff">import glob</span></p> </blockquote>  <blockquote>   <p><span style="color: #0000ff">a = glob.glob(&quot;*.html&quot;)</span></p> </blockquote>  <blockquote>   <p><span style="color: #0000ff">b = glob.glob(&quot;image[0-5]*.gif&quot;)</span></p> </blockquote>  <p>Pattern matching is performed using rules of Unix shell. Tilde (~) and variable expansion is not performed. </p>  <h4>fnmatch module</h4>  <p>Matches filenames according to rules of Unix shell. </p>  <blockquote>   <p><span style="color: #0000ff">
import fnmatch</span></p> </blockquote>  <blockquote>   <p><span style="color: #0000ff">if fnmatch(filename,&quot;*.html&quot;):</span></p> </blockquote>  <blockquote>   <p><span style="color: #0000ff">...</span></p> </blockquote>  <p>Case-sensitivity depends on the operating system.</p>  <h4>Other File-Related Modules</h4>  <ul>   <li>     <h5>fcntl : Provides access to the fcntl() system call and file-locking operations</h5>   </li> </ul>  <blockquote>   <p><span style="color: #0000ff">import fcntl, FCNTL</span></p> </blockquote>  <blockquote>   <p><span style="color: #0000ff">fcntl.flock(f.fileno(),FCNTL.LOCK_EX) # Lock a file</span></p> </blockquote>  <ul>   <li>     <h5>tempfile : Creates temporary files</h5>   </li>    <li>     <h5>gzip : Creates file objects with compression/decompression. Compatible with the GNU gzip program.</h5>   </li> </ul>  <blockquote>   <p><span style="color: #0000ff">import gzip</span></p> </blockquote>  <blockquote>   <p><span style="color: #0000ff">f = gzip.open(&quot;foo&quot;,&quot;wb&quot;)</span></p> </blockquote>  <blockquote>   <p><span style="color: #0000ff">f.write(data)</span></p> </blockquote>  <h4>Exceptions</h4>  <p>Whenever a runtime error occurs, it creates an exception. Usually, the program stops and Python prints an error message.</p>  <blockquote>   <p><span style="color: #0000ff">&gt;&gt;&gt; print 55/0</span></p> </blockquote>  <blockquote>   <p><span style="color: #0000ff">ZeroDivisionError: integer division or modulo</span></p> </blockquote>  <p>We can handle the exception using the try and except statements.</p>  <blockquote>   <p><span style="color: #0000ff">filename = raw_input('Enter a file name: ')</span></p> </blockquote>  <blockquote>   <p><span style="color: #0000ff">try:</span></p> </blockquote>  <blockquote>   <p><span style="color: #0000ff">f = open (filename, &quot;r&quot;)</span></p> </blockquote>  <blockquote>   <p><span style="color: #0000ff">except:</span></p> </blockquote>  <blockquote>   <p><span style="color: #0000ff">print 'There is no file named', filename</span></p> </blockquote>  <p>The try statement executes the statements in the first block. If no exceptions occur, it ignores the except statement. If any exception occurs, it executes the statements in the except branch and then continues.</p>  <p>If your program detects an error condition, you can make it raise an exception.</p>  <blockquote>   <p><span style="color: #0000ff">def inputNumber () :</span></p> </blockquote>  <blockquote>   <p><span style="color: #0000ff">x = input ('Pick a number: ')</span></p> </blockquote>  <blockquote>   <p><span style="color: #0000ff">if x == 17 :</span></p> </blockquote>  <blockquote>   <p><span style="color: #0000ff">raise 'BadNumberError', '17 is a bad number'</span></p> </blockquote>  <blockquote>   <p><span style="color: #0000ff">return x</span></p> </blockquote>  <p>The raise statement takes two arguments: the exception type and specific</p>  <p>information about the error. And here how the previous example appears:</p>  <blockquote>   <p><span style="color: #0000ff">&gt;&gt;&gt; inputNumber ()</span></p> </blockquote>  <blockquote>   <p><span style="color: #0000ff">Pick a number: 17</span></p> </blockquote>  <blockquote>   <p><span style="color: #0000ff">BadNumberError: 17 is a bad number</span></p> </blockquote>  <p>This note talked about files, directories, and exceptions. The next note will go into the object oriented features of Python.</p>
