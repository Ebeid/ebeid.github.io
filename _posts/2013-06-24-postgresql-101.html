---
layout: post
title: PostgreSQL 101
date: '2013-06-24T16:59:00.001-05:00'
author: Ebeid Soliman ElSayed
tags:
- PostgreSQL
modified_time: '2013-06-27T17:42:29.513-05:00'
thumbnail: http://lh4.ggpht.com/-lZeAxgeL9xg/UcjBFCVr0_I/AAAAAAAABYM/Iq9cUAOj7CY/s72-c/Setup_2013-06-24_14-23-08_thumb%25255B1%25255D.png?imgmax=800
blogger_id: tag:blogger.com,1999:blog-59384554657271185.post-1002609715498201480
blogger_orig_url: http://ebeid-soliman.blogspot.com/2013/06/postgresql-101.html
---

<p>PostgreSQL is the finest open source example of the relational database management system (RDBMS) tradition. This means that PostGreSQL is a design-first data store. First you design the schema, and then you enter data that conforms to the definition of that schema.</p> <h3>History of PostgreSQL</h3> <blockquote> <p>PostgreSQL has existed in the current project incarnation since 1995, but its roots<br>are considerably older. The original project was written at Berkeley in the early 1970s<br>and called the Interactive Graphics and Retrieval System, or “Ingres” for short. In the<br>1980s, an improved version was launched post-Ingres—shortened to Postgres. The<br>project ended at Berkeley proper in 1993 but was picked up again by the open source<br>community as Postgres95. It was later renamed to PostgreSQL in 1996 to denote its<br>rather new SQL support and has remained so ever since.</p></blockquote> <h3>Installation</h3> <p>You can download the latest PostgreSQL installer from <a href="http://www.postgresql.org/download">http://www.postgresql.org/download</a> (In this tutorial I’m using the Windows 64bit installer). Setup is straight-forward. Below are screen-shots of installation steps:</p> <p><a href="http://lh3.ggpht.com/-CAAjgM5M3G0/Ucsrnl3pbsI/AAAAAAAABYE/75_S-8wSMpA/s1600-h/Setup_2013-06-24_14-23-08%25255B3%25255D.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Setup_2013-06-24_14-23-08" border="0" alt="Setup_2013-06-24_14-23-08" src="http://lh4.ggpht.com/-lZeAxgeL9xg/UcjBFCVr0_I/AAAAAAAABYM/Iq9cUAOj7CY/Setup_2013-06-24_14-23-08_thumb%25255B1%25255D.png?imgmax=800" width="306" height="242"></a></p> <p><a href="http://lh6.ggpht.com/-ZN7dOWIzURM/UcjBFXJkg5I/AAAAAAAABYU/wNrJYc_WECA/s1600-h/Setup_2013-06-24_14-23-13%25255B3%25255D.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Setup_2013-06-24_14-23-13" border="0" alt="Setup_2013-06-24_14-23-13" src="http://lh3.ggpht.com/-O3lpaxM16n8/UcjBFoz8YDI/AAAAAAAABYc/8yzV7eWQPBg/Setup_2013-06-24_14-23-13_thumb%25255B1%25255D.png?imgmax=800" width="309" height="244"></a></p> <p><a href="http://lh6.ggpht.com/-i3vkGQ2fVvc/UcjBF2LCpnI/AAAAAAAABYk/c2Aa0NVWmwg/s1600-h/Setup_2013-06-24_14-23-16%25255B3%25255D.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Setup_2013-06-24_14-23-16" border="0" alt="Setup_2013-06-24_14-23-16" src="http://lh4.ggpht.com/-RIzDi9pql6w/UcjBGA_P3jI/AAAAAAAABYs/-Gwdh4WgcqA/Setup_2013-06-24_14-23-16_thumb%25255B1%25255D.png?imgmax=800" width="312" height="247"></a></p> <p>remember the superuser password, you will need it later</p> <p><a href="http://lh3.ggpht.com/-9O0f35Nwiu8/UcjBGixQq1I/AAAAAAAABY0/6fylsChQjVo/s1600-h/Setup_2013-06-24_14-23-37%25255B3%25255D.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Setup_2013-06-24_14-23-37" border="0" alt="Setup_2013-06-24_14-23-37" src="http://lh6.ggpht.com/-kKKpBPnZAhY/UcjBG4FGL1I/AAAAAAAABY8/iWEW8ANpNoc/Setup_2013-06-24_14-23-37_thumb%25255B1%25255D.png?imgmax=800" width="315" height="249"></a></p> <p><a href="http://lh5.ggpht.com/-E32ix2acf50/UcjBHMAc2uI/AAAAAAAABZE/WQCAnchbIEI/s1600-h/Setup_2013-06-24_14-23-41%25255B3%25255D.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Setup_2013-06-24_14-23-41" border="0" alt="Setup_2013-06-24_14-23-41" src="http://lh6.ggpht.com/-n5Eb0QkOLSE/UcjBHTfkeQI/AAAAAAAABZI/A5eeBEtmlbw/Setup_2013-06-24_14-23-41_thumb%25255B1%25255D.png?imgmax=800" width="316" height="250"></a></p> <p><a href="http://lh5.ggpht.com/-0Yb8rVVlg-Y/UcjBHqCmnaI/AAAAAAAABZU/3UDmkPRVbz0/s1600-h/Setup_2013-06-24_14-23-44%25255B3%25255D.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Setup_2013-06-24_14-23-44" border="0" alt="Setup_2013-06-24_14-23-44" src="http://lh6.ggpht.com/-BbzkZnuZ0qU/UcjBH55CKrI/AAAAAAAABZc/ICMXaoXlHtY/Setup_2013-06-24_14-23-44_thumb%25255B1%25255D.png?imgmax=800" width="317" height="250"></a></p> <p><a href="http://lh6.ggpht.com/-EZGOzuAf37E/UcjBIIPNYVI/AAAAAAAABZk/mO_l0zpS8kk/s1600-h/Setup_2013-06-24_14-23-47%25255B3%25255D.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Setup_2013-06-24_14-23-47" border="0" alt="Setup_2013-06-24_14-23-47" src="http://lh6.ggpht.com/-py4A8BjhHf0/UcjBIo0LRPI/AAAAAAAABZs/lPYYzcZ8OQI/Setup_2013-06-24_14-23-47_thumb%25255B1%25255D.png?imgmax=800" width="318" height="251"></a></p> <p><a href="http://lh6.ggpht.com/-J40wfG2oW3g/UcjBI0V2s2I/AAAAAAAABZ0/LRJRe4LYokc/s1600-h/Setup_2013-06-24_14-23-56%25255B3%25255D.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Setup_2013-06-24_14-23-56" border="0" alt="Setup_2013-06-24_14-23-56" src="http://lh6.ggpht.com/-BOZ3ztgv26k/UcjBJOz9CjI/AAAAAAAABZ8/gpvn0Q2xPeY/Setup_2013-06-24_14-23-56_thumb%25255B1%25255D.png?imgmax=800" width="318" height="251"></a></p> <p>when the PostgreSQL installation finish, you could choose to run Stack Builder to install additional tools. In my case I chose to run Stack builder</p> <p><a href="http://lh5.ggpht.com/-cqUDxCMAiPY/UcjBJeRrYtI/AAAAAAAABaE/GkxfZeMQgkk/s1600-h/Setup_2013-06-24_14-25-58%25255B3%25255D.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Setup_2013-06-24_14-25-58" border="0" alt="Setup_2013-06-24_14-25-58" src="http://lh5.ggpht.com/-AQ2LGHRSvPU/UcjBJnnqt7I/AAAAAAAABaM/IaLH__3S5qE/Setup_2013-06-24_14-25-58_thumb%25255B1%25255D.png?imgmax=800" width="317" height="250"></a></p> <p>choose your recently installed instance</p> <p><a href="http://lh5.ggpht.com/-mRBURmWxP84/UcjBKDaYwTI/AAAAAAAABaU/lJviD-foMXk/s1600-h/Stack%252520Builder%2525203.1.0_2013-06-24_14-26-15%25255B3%25255D.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Stack Builder 3.1.0_2013-06-24_14-26-15" border="0" alt="Stack Builder 3.1.0_2013-06-24_14-26-15" src="http://lh4.ggpht.com/-1xYazeW9L1Q/UcjBKVsuxXI/AAAAAAAABac/VNbm0eGLDfY/Stack%252520Builder%2525203.1.0_2013-06-24_14-26-15_thumb%25255B1%25255D.png?imgmax=800" width="322" height="224"></a></p> <p>and I choose to install Npgsql database driver (for future .Net development) and phpPgAdmin for administration tasks.</p> <p><a href="http://lh6.ggpht.com/-Nbaz8hwp-lY/UcjBKozzEZI/AAAAAAAABak/xPjWo4gjl20/s1600-h/Stack%252520Builder%2525203.1.0_2013-06-24_14-26-54%25255B3%25255D.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Stack Builder 3.1.0_2013-06-24_14-26-54" border="0" alt="Stack Builder 3.1.0_2013-06-24_14-26-54" src="http://lh3.ggpht.com/-E6o3TjowPHg/UcjBLDH6oiI/AAAAAAAABas/YgClKJ0uvn0/Stack%252520Builder%2525203.1.0_2013-06-24_14-26-54_thumb%25255B1%25255D.png?imgmax=800" width="326" height="227"></a></p> <p><a href="http://lh3.ggpht.com/-12paIFizaPw/UcjBLYOxfFI/AAAAAAAABa0/O7iqh_DzDzs/s1600-h/Stack%252520Builder%2525203.1.0_2013-06-24_14-27-00%25255B3%25255D.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Stack Builder 3.1.0_2013-06-24_14-27-00" border="0" alt="Stack Builder 3.1.0_2013-06-24_14-27-00" src="http://lh3.ggpht.com/-grXV8m2_gxE/UcjBLkvQA4I/AAAAAAAABa8/FXpE_ZGXMsA/Stack%252520Builder%2525203.1.0_2013-06-24_14-27-00_thumb%25255B1%25255D.png?imgmax=800" width="328" height="228"></a></p> <p><a href="http://lh6.ggpht.com/-0ENN9bqfrX0/UcjBMHI9i4I/AAAAAAAABbE/jTqq2OeEDf0/s1600-h/Stack%252520Builder%2525203.1.0_2013-06-24_14-27-13%25255B3%25255D.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Stack Builder 3.1.0_2013-06-24_14-27-13" border="0" alt="Stack Builder 3.1.0_2013-06-24_14-27-13" src="http://lh6.ggpht.com/-9mltXlBXuMc/UcjBMQgQLiI/AAAAAAAABbM/sw7iL_CWEgg/Stack%252520Builder%2525203.1.0_2013-06-24_14-27-13_thumb%25255B1%25255D.png?imgmax=800" width="329" height="229"></a></p> <p>Stack Builder will lunch installation wizards for your chosen tools in sequence</p> <p><a href="http://lh4.ggpht.com/-h1ns0BElTAM/UcjBMsa9xII/AAAAAAAABbU/AB9UtMrkHko/s1600-h/Setup_2013-06-24_14-27-30%25255B3%25255D.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Setup_2013-06-24_14-27-30" border="0" alt="Setup_2013-06-24_14-27-30" src="http://lh6.ggpht.com/-13QqAph5QRU/UcjBM8GiBWI/AAAAAAAABbc/2jjd9cP-jZU/Setup_2013-06-24_14-27-30_thumb%25255B1%25255D.png?imgmax=800" width="333" height="263"></a>&nbsp;</p> <p><a href="http://lh5.ggpht.com/-yoMGOcyJKUY/UcjBNdsHycI/AAAAAAAABbk/y3uVz03SfKE/s1600-h/Setup_2013-06-24_14-27-34%25255B3%25255D.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Setup_2013-06-24_14-27-34" border="0" alt="Setup_2013-06-24_14-27-34" src="http://lh4.ggpht.com/-9g73USIp8Qo/UcjBNQnawzI/AAAAAAAABbs/F8yPJU1aNK0/Setup_2013-06-24_14-27-34_thumb%25255B1%25255D.png?imgmax=800" width="336" height="265"></a></p> <p><a href="http://lh5.ggpht.com/-h3kUO9lWpY4/UcjBN9bZ_VI/AAAAAAAABb0/_FJa2oALIOk/s1600-h/Setup_2013-06-24_14-27-36%25255B3%25255D.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Setup_2013-06-24_14-27-36" border="0" alt="Setup_2013-06-24_14-27-36" src="http://lh4.ggpht.com/-UGCKEIIWZUI/UcjBOHkHJ-I/AAAAAAAABb8/UxRcrMU0YcI/Setup_2013-06-24_14-27-36_thumb%25255B1%25255D.png?imgmax=800" width="341" height="269"></a></p> <p><a href="http://lh6.ggpht.com/-vy00bzXysfg/UcjBOSbgDGI/AAAAAAAABcE/j5f4NvrC6uo/s1600-h/Setup_2013-06-24_14-27-41%25255B3%25255D.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Setup_2013-06-24_14-27-41" border="0" alt="Setup_2013-06-24_14-27-41" src="http://lh5.ggpht.com/--c6BJsrlz3s/UcjBO5_17hI/AAAAAAAABcM/Uldoxrip0jc/Setup_2013-06-24_14-27-41_thumb%25255B1%25255D.png?imgmax=800" width="341" height="269"></a></p> <p><a href="http://lh5.ggpht.com/-CEkj4JbTrao/UcjBPFk8wZI/AAAAAAAABcU/nESOM2pnsq0/s1600-h/Setup_2013-06-24_14-30-25%25255B3%25255D.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Setup_2013-06-24_14-30-25" border="0" alt="Setup_2013-06-24_14-30-25" src="http://lh4.ggpht.com/-inrDUaLXaCY/UcjBPYcG_TI/AAAAAAAABcc/8A_R5dHYBsk/Setup_2013-06-24_14-30-25_thumb%25255B1%25255D.png?imgmax=800" width="344" height="272"></a></p> <p><a href="http://lh5.ggpht.com/-rwxq0YlNZDI/UcjBPt8GqJI/AAAAAAAABck/Bh6NTqljaYU/s1600-h/Setup_2013-06-24_14-30-37%25255B3%25255D.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Setup_2013-06-24_14-30-37" border="0" alt="Setup_2013-06-24_14-30-37" src="http://lh6.ggpht.com/-7suybV4-Qjk/UcjBQEWBhKI/AAAAAAAABcs/4QIKIKT6DPg/Setup_2013-06-24_14-30-37_thumb%25255B1%25255D.png?imgmax=800" width="346" height="273"></a></p> <p><a href="http://lh3.ggpht.com/-RNR7GaL1CQc/UcjBQZ-RViI/AAAAAAAABc0/iw6HLHyM27A/s1600-h/Setup_2013-06-24_14-30-42%25255B3%25255D.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Setup_2013-06-24_14-30-42" border="0" alt="Setup_2013-06-24_14-30-42" src="http://lh3.ggpht.com/-z8tgO54vr1g/UcjBQp5sZZI/AAAAAAAABc8/HLYYUq5UVnA/Setup_2013-06-24_14-30-42_thumb%25255B1%25255D.png?imgmax=800" width="350" height="276"></a></p> <p><a href="http://lh4.ggpht.com/-08y7rupoFj4/UcjBQ1ZEpTI/AAAAAAAABdE/E_l23_y3XIY/s1600-h/Setup_2013-06-24_14-30-47%25255B3%25255D.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Setup_2013-06-24_14-30-47" border="0" alt="Setup_2013-06-24_14-30-47" src="http://lh5.ggpht.com/-df5S0P_c79o/UcjBRPdU0pI/AAAAAAAABdM/bLF8HdrbHaY/Setup_2013-06-24_14-30-47_thumb%25255B1%25255D.png?imgmax=800" width="349" height="276"></a></p> <p><a href="http://lh6.ggpht.com/-rWJfPVmBY2Y/UcjBRvajZmI/AAAAAAAABdU/7SZ3Bvkf5EI/s1600-h/Setup_2013-06-24_14-30-53%25255B3%25255D.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Setup_2013-06-24_14-30-53" border="0" alt="Setup_2013-06-24_14-30-53" src="http://lh3.ggpht.com/-8CL5UclmmOY/UcjBR6abbEI/AAAAAAAABdc/ftAEXwPxZmc/Setup_2013-06-24_14-30-53_thumb%25255B1%25255D.png?imgmax=800" width="354" height="280"></a></p> <p><a href="http://lh5.ggpht.com/-V3nM3zKYgbQ/UcjBSbajbQI/AAAAAAAABdk/NpjIJfNdSJo/s1600-h/Setup_2013-06-24_14-31-12%25255B3%25255D.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Setup_2013-06-24_14-31-12" border="0" alt="Setup_2013-06-24_14-31-12" src="http://lh3.ggpht.com/-9FgS1q82Lww/UcjBShX8QsI/AAAAAAAABds/oPBBLD0qOy4/Setup_2013-06-24_14-31-12_thumb%25255B1%25255D.png?imgmax=800" width="354" height="280"></a></p> <p><a href="http://lh4.ggpht.com/-oMKuI1N4gAU/UcjBS7Kgw9I/AAAAAAAABd0/CeisURU4tX0/s1600-h/Stack%252520Builder%2525203.1.0_2013-06-24_14-31-19%25255B3%25255D.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Stack Builder 3.1.0_2013-06-24_14-31-19" border="0" alt="Stack Builder 3.1.0_2013-06-24_14-31-19" src="http://lh3.ggpht.com/-gBrRkO6zfaE/UcjBTHoiKYI/AAAAAAAABd8/xmubCPIsaX8/Stack%252520Builder%2525203.1.0_2013-06-24_14-31-19_thumb%25255B1%25255D.png?imgmax=800" width="360" height="250"></a></p> <h3>Starting with PostgreSQL</h3> <p>To get started, open <em><strong>pgAdmin III</strong></em> from your start menu. On the left hand side right-click on your server instance and click <em>Connect</em></p> <p><a href="http://lh6.ggpht.com/-_I1U9j4mukk/UcjBTd-855I/AAAAAAAABeE/1925mIY3Wck/s1600-h/pgAdmin%252520III_2013-06-24_15-08-22%25255B3%25255D.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="pgAdmin III_2013-06-24_15-08-22" border="0" alt="pgAdmin III_2013-06-24_15-08-22" src="http://lh3.ggpht.com/-Ndq-u2cNFR0/UcjBT22zPPI/AAAAAAAABeM/mRB58gMVPvY/pgAdmin%252520III_2013-06-24_15-08-22_thumb%25255B1%25255D.png?imgmax=800" width="325" height="306"></a>&nbsp;</p> <p>enter the password you used in the setup </p> <p><a href="http://lh4.ggpht.com/-EQbGp6PwN0U/UcjBUGJrcYI/AAAAAAAABeU/V-B75v9GeuA/s1600-h/Connect%252520to%252520Server_2013-06-24_15-08-43%25255B6%25255D.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Connect to Server_2013-06-24_15-08-43" border="0" alt="Connect to Server_2013-06-24_15-08-43" src="http://lh6.ggpht.com/-tRCEJzlR30s/UcjBUswvPpI/AAAAAAAABec/Gj7oGtusRbc/Connect%252520to%252520Server_2013-06-24_15-08-43_thumb%25255B2%25255D.png?imgmax=800" width="285" height="163"></a></p> <p>Once you connected to your server, you can right click on the databases node and click <em>New Database</em></p> <p><a href="http://lh3.ggpht.com/-OluxtIPfG30/UcjBU8xfcRI/AAAAAAAABek/DtOlYL_JBfw/s1600-h/pgAdmin%252520III_2013-06-24_15-09-33%25255B3%25255D.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="pgAdmin III_2013-06-24_15-09-33" border="0" alt="pgAdmin III_2013-06-24_15-09-33" src="http://lh5.ggpht.com/-uc7J84s1dhA/UcjBVH504jI/AAAAAAAABes/2Fe3RIPv-ss/pgAdmin%252520III_2013-06-24_15-09-33_thumb%25255B1%25255D.png?imgmax=800" width="335" height="335"></a></p> <p>we going to create a simple database called <em>book</em> with the default settings</p> <p><a href="http://lh3.ggpht.com/-RhVA1VtBeiw/UcjBVjAEUfI/AAAAAAAABe0/3_aZxPEvfQM/s1600-h/New%252520Database..._2013-06-24_16-45-31%25255B3%25255D.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="New Database..._2013-06-24_16-45-31" border="0" alt="New Database..._2013-06-24_16-45-31" src="http://lh6.ggpht.com/-t8G0GRbn_e0/UcjBV2tGb6I/AAAAAAAABe8/afvyeMZ5FqQ/New%252520Database..._2013-06-24_16-45-31_thumb%25255B1%25255D.png?imgmax=800" width="338" height="355"></a></p> <p>to start writing queries, you could open <em>Tools</em> menu, then click <em>Query Tool </em>(or press CTRL + E).</p> <h3>Working with Tables</h3> <p>Creating a table consists of giving it a name and a list of columns with types<br>and (optional) constraint information. Each table should also nominate a<br>unique identifier column to pinpoint specific rows. That identifier is called a<br>PRIMARY KEY. The SQL to create a countries table looks like this:</p><pre class="prettyprint lang-sql">CREATE TABLE countries (country_code char(2) PRIMARY KEY,country_name text UNIQUE);<br /><br /></pre><br /><p>copy and paste this code in the Query Tool and click <a href="http://lh5.ggpht.com/--inYX8FBQJI/UcjBWCYwn7I/AAAAAAAABVg/KxWcvEouzvU/s1600-h/Query%252520-%252520book%252520on%252520postgres%252540localhost5432%252520_2013-06-24_16-54-24%25255B2%25255D.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Query - book on postgres@localhost5432 _2013-06-24_16-54-24" border="0" alt="Query - book on postgres@localhost5432 _2013-06-24_16-54-24" src="http://lh3.ggpht.com/-pBHzwcT9jGk/UcjBWeBNCJI/AAAAAAAABVo/kGOy78l1zOs/Query%252520-%252520book%252520on%252520postgres%252540localhost5432%252520_2013-06-24_16-54-24_thumb.png?imgmax=800" width="81" height="59"></a> on the toolbar to run it.</p><br /><p>To insert values in our countries table:</p><pre class="prettyprint lang-sql">INSERT INTO countries (country_code, country_name)<br />VALUES ('us','United States'), ('mx','Mexico'), ('au','Australia'),<br />('uk','United Kingdom'), ('de','Germany'), ('ll','Loompaland');<br /><br /></pre><br /><p>To select from our table:</p><pre class="prettyprint lang-sql">SELECT * FROM countries;<br /><br /></pre><br /><p>To delete :</p><pre class="prettyprint lang-sql">DELETE FROM countries<br />WHERE country_code = 'll';<br /></pre><br /><p>Now, let’s add a cities table. To ensure any inserted country_code also exists in our countries table, we add the REFERENCES keyword. Since the country_code column references another table’s key, it’s known as the foreign key constraint. </p><pre class="prettyprint lang-sql">CREATE TABLE cities (<br />name text NOT NULL,<br />postal_code varchar(9) CHECK (postal_code &lt;&gt; ''),<br />country_code char(2) REFERENCES countries,<br />PRIMARY KEY (country_code, postal_code)<br />);<br /></pre><br /><p>we constrained the name in cities by disallowing NULL values. We constrained postal_code by checking that no values are empty strings (&lt;&gt; means not equal). Furthermore, since a PRIMARY KEY uniquely identifies a row, we created a compound key: country_code + postal_code. Together, they uniquely define a row. now if you try to run this code you will get an error because we violating referential integrity: </p><pre class="prettyprint lang-sql">INSERT INTO cities<br />VALUES ('Toronto','M4C1B5','ca');<br /></pre><br /><p>To update records:</p><pre class="prettyprint lang-sql">INSERT INTO cities<br />VALUES ('Portland','87200','us');<br />UPDATE cities<br />SET postal_code = '97205'<br />WHERE name = 'Portland';<br /></pre><br /><h3>Inner Join</h3><br /><p>Being a relational database gives PostgreSQL the ability to join tables together when reading them. Joining, in essence, is an operation taking two separate tables and combining them in some way to return a single table. It’s somewhat like shuffling up Scrabble pieces from existing words to make new words. The basic form of a join is the inner join. In the simplest form, you specify two columns (one from each table) to match by, using the ON keyword.</p><pre class="prettyprint lang-sql">SELECT cities.*, country_name<br />FROM cities INNER JOIN countries<br />ON cities.country_code = countries.country_code;<br /></pre><br /><p><a href="http://lh3.ggpht.com/-uAS8ROnpqLQ/UcodXNPg_xI/AAAAAAAABfE/nonEkyd5Z3g/s1600-h/Query%252520-%252520book%252520on%252520postgres%252540localhost5432%252520_2013-06-25_09-07-07%25255B3%25255D.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Query - book on postgres@localhost5432 _2013-06-25_09-07-07" border="0" alt="Query - book on postgres@localhost5432 _2013-06-25_09-07-07" src="http://lh3.ggpht.com/-0Uj_pAyymes/UcodXXWvR8I/AAAAAAAABfM/ae704474dJ8/Query%252520-%252520book%252520on%252520postgres%252540localhost5432%252520_2013-06-25_09-07-07_thumb%25255B1%25255D.png?imgmax=800" width="503" height="239"></a></p><br /><p>The join returns a single table, sharing all columns’ values of the cities table plus the matching country_name value from the countries table. We can also join a table like cities that has a compound primary key. To test a compound join, let’s create a new table that stores a list of venues. A venue exists in both a postal code and a specific country. The foreign key must be two columns that reference both cities primary key columns. (MATCH FULL is a constraint that ensures either both values exist or both are NULL.)</p><pre class="prettyprint lang-sql">CREATE TABLE venues (<br />venue_id SERIAL PRIMARY KEY,<br />name varchar(255),<br />street_address text,<br />type char(7) CHECK ( type in ('public','private') ) DEFAULT 'public',<br />postal_code varchar(9),<br />country_code char(2),<br />FOREIGN KEY (country_code, postal_code)<br />REFERENCES cities (country_code, postal_code) MATCH FULL<br />);<br /></pre><br /><p>This venue_id column is a common primary key setup: automatically incremented integers (1, 2, 3, 4, and so on…). Creating new row will populate this column automatically. We make this identifier using the SERIAL keyword. CHECK keyword check that a column supplied value against a set of predefined values. DEFAULT provide a default value to be inserted in case user supplied nothing. </p><pre class="prettyprint lang-sql">INSERT INTO venues (name, postal_code, country_code)<br />VALUES ('Crystal Ballroom', '97205', 'us');<br /></pre><br /><p>Joining the venues table with the cities table requires both foreign key columns.</p><pre class="prettyprint lang-sql">SELECT venues.venue_id, venues.name, cities.name<br />FROM venues INNER JOIN cities <br />ON venues.postal_code = cities.postal_code AND venues.country_code = cities.country_code;<br /></pre><br /><p><a href="http://lh5.ggpht.com/-DhPVZsdeQeY/UcodXlCojwI/AAAAAAAABfU/HVfVL-b7cS0/s1600-h/Query%252520-%252520book%252520on%252520postgres%252540localhost5432%252520_2013-06-25_11-03-08%25255B5%25255D.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Query - book on postgres@localhost5432 _2013-06-25_11-03-08" border="0" alt="Query - book on postgres@localhost5432 _2013-06-25_11-03-08" src="http://lh4.ggpht.com/-x5KL9el92G4/UcodX_9-r8I/AAAAAAAABfc/FCWAsJZlUzI/Query%252520-%252520book%252520on%252520postgres%252540localhost5432%252520_2013-06-25_11-03-08_thumb%25255B3%25255D.png?imgmax=800" width="528" height="174"></a></p><br /><h3>Outer Join</h3><br /><p>Outer joins are a way of merging two tables when the results of one table must always be returned, whether or not any matching column values exist on the other table. Let's create a table and populate it for testing this:</p><pre class="prettyprint lang-sql">CREATE TABLE events (<br />event_id SERIAL PRIMARY KEY,<br />title varchar(255),<br />starts timestamp,<br />ends timestamp,<br />venue_id integer,<br />FOREIGN KEY (venue_id)<br />REFERENCES venues (venue_id) MATCH FULL<br />);<br /><br />INSERT INTO events (title, starts, ends, venue_id)<br />VALUES ('LARP Club', '2012-02-15 17:30:00', '2012-02-15 19:30:00', 1);<br />INSERT INTO events (title, starts, ends)<br />VALUES ('April Fools Day', '2012-04-01 00:00:00', '22012-04-01 23:59:00');<br />INSERT INTO events (title, starts, ends)<br />VALUES ('Christmas Day', '2012-12-25 00:00:00', '2012-04-01 23:59:00');<br /></pre><br /><p>Now the results of the following two queries showing you the difference between INNER JOIN and OUTER JOIN.</p><pre class="prettyprint lang-sql">SELECT events.title, venues.name<br />FROM events JOIN venues<br />ON events.venue_id = venues.venue_id;<br /><br />SELECT events.title, venues.name<br />FROM events LEFT JOIN venues<br />ON events.venue_id = venues.venue_id;<br /></pre><br /><p>Finally, there’s the FULL JOIN, which is the union of LEFT and RIGHT; you’re guaranteed all values from each table, joined wherever columns match. </p><br /><h3>Indexes </h3><br /><p>RDBMSs uses indexes to reducing disk reads and query optimization (among other things). If we select the title of Christmas Day from the events table, the algorithm must scan every row for a match to return. Without an index, each row must be read from disk to know whether a query should return it. An index is a special data structure built to avoid a full table scan when performing a query. PostgreSQL (like any other RDBMS) automatically creates an index on the primary key, where the key is the primary key value and where the value points to a row on disk. Using the UNIQUE keyword is another way to force an index on a table column. PostgreSQL also creates indexes for columns targeted by FOREIGN KEY constraint.</p><br /><p>You can explicitly add a hash index using the CREATE INDEX command, where each value must be unique. <em>btree</em> is the suitable data structure for ranges. For more information, refer to <a href="http://www.postgresql.org/docs/9.1/static/sql-createindex.html" target="_blank">online documentation</a>.</p><pre class="prettyprint lang-sql">CREATE INDEX events_starts<br />ON events USING btree (starts);<br /></pre><br /><h3>Aggregate Functions</h3><br /><p>An aggregate query groups results from several rows by some common criteria. It can be as simple as counting the number of rows in a table or calculating the average of some numerical column. Examples:</p><pre class="prettyprint lang-sql">SELECT count(title)<br />FROM events<br /><br />SELECT min(starts), max(ends)<br />FROM events<br /></pre><br /><p>Aggregate functions are useful but limited on their own. If we wanted to count all events at each venue, we could write the following for each venue ID (which is tedious): </p><pre class="prettyprint lang-sql">SELECT count(*) FROM events WHERE venue_id = 1;<br />SELECT count(*) FROM events WHERE venue_id = 2;<br />SELECT count(*) FROM events WHERE venue_id = 3;<br />SELECT count(*) FROM events WHERE venue_id IS NULL;<br /></pre><br /><h3>Grouping</h3><br /><p>With GROUP BY, you tell Postgres to place the rows into groups and then perform some aggregate function (such as count()) on those groups.</p><pre class="prettyprint lang-sql">SELECT venue_id, count(*)<br />FROM events<br />GROUP BY venue_id;<br /></pre><br /><p><a href="http://lh3.ggpht.com/-C-1sR37Nh-E/UcodYPHci_I/AAAAAAAABfk/ViPEXoMQs1E/s1600-h/Query%252520-%252520book%252520on%252520postgres%252540localhost5432%252520_2013-06-25_13-49-47%25255B3%25255D.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Query - book on postgres@localhost5432 _2013-06-25_13-49-47" border="0" alt="Query - book on postgres@localhost5432 _2013-06-25_13-49-47" src="http://lh4.ggpht.com/-WFWI3HrM-dY/UcodY38uZmI/AAAAAAAABfs/rlOoTW7PSKw/Query%252520-%252520book%252520on%252520postgres%252540localhost5432%252520_2013-06-25_13-49-47_thumb%25255B1%25255D.png?imgmax=800" width="265" height="101"></a></p><br /><p>The GROUP BY condition has its own filter keyword: HAVING. HAVING is like the WHERE clause, except it can filter by aggregate functions (whereas WHERE cannot). </p><pre class="prettyprint lang-sql">SELECT venue_id<br />FROM events<br />GROUP BY venue_id<br />HAVING count(*) = 1;<br /></pre><br /><p><a href="http://lh3.ggpht.com/-uzQocCWlwkE/UcodZIGcoTI/AAAAAAAABWs/aYb63-wcyrY/s1600-h/Query%252520-%252520book%252520on%252520postgres%252540localhost5432%252520_2013-06-25_13-50-56%25255B2%25255D.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Query - book on postgres@localhost5432 _2013-06-25_13-50-56" border="0" alt="Query - book on postgres@localhost5432 _2013-06-25_13-50-56" src="http://lh5.ggpht.com/-HXuiDZYXoqY/UcodZtqs4GI/AAAAAAAABW0/TlB-PaE_3gs/Query%252520-%252520book%252520on%252520postgres%252540localhost5432%252520_2013-06-25_13-50-56_thumb.png?imgmax=800" width="108" height="59"></a></p><br /><p>You can use GROUP BY without any aggregate functions. If you SELECT one column, you get all unique values.<br>SELECT venue_id FROM events GROUP BY venue_id;<br>This kind of grouping is so common that SQL has a shortcut in the DISTINCT keyword.<br>SELECT DISTINCT venue_id FROM events;<br>The results of both queries will be identical.</p><br /><h3>Window Functions</h3><br /><p>Window functions are similar to GROUP BY queries in that they allow you to run aggregate functions across multiple rows. The difference is that they allow you to use built-in aggregate functions without requiring every single field to be grouped to a single row. If we attempt to select the title column without grouping by it, we can expect an error.</p><br /><p><a href="http://lh5.ggpht.com/-GmniDTsVymM/UcodZylT97I/AAAAAAAABW8/CauON0Q1q8Q/s1600-h/Query%252520-%252520book%252520on%252520postgres%252540localhost5432%252520_2013-06-25_14-10-42%25255B3%25255D.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Query - book on postgres@localhost5432 _2013-06-25_14-10-42" border="0" alt="Query - book on postgres@localhost5432 _2013-06-25_14-10-42" src="http://lh4.ggpht.com/-MeLiK_T_ZOA/UcodaKepJrI/AAAAAAAABXA/S4EwT0xYDqE/Query%252520-%252520book%252520on%252520postgres%252540localhost5432%252520_2013-06-25_14-10-42_thumb%25255B1%25255D.png?imgmax=800" width="465" height="181"></a></p><br /><p>We are counting up the rows by venue_id, and in the case of LARP Club and Wedding, we have two titles for a single venue_id. Postgres doesn’t know which title to display. Whereas a GROUP BY clause will return one record per matching group value, a window function can return a separate record for each row. Window functions return all matches and replicate the results of any aggregate function. It returns the results of an aggregate function OVER a PARTI TI ON of the result set.</p><br /><p><a href="http://lh5.ggpht.com/-JogKyEvJUqM/Ucodaqww4qI/AAAAAAAABXM/yIxgpa4-FF4/s1600-h/Query%252520-%252520book%252520on%252520postgres%252540localhost5432%252520_2013-06-25_14-17-36%25255B3%25255D.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Query - book on postgres@localhost5432 _2013-06-25_14-17-36" border="0" alt="Query - book on postgres@localhost5432 _2013-06-25_14-17-36" src="http://lh3.ggpht.com/-Ip5WUPnt-Ec/Ucoda8E9r9I/AAAAAAAABXU/oxUqinEk7gs/Query%252520-%252520book%252520on%252520postgres%252540localhost5432%252520_2013-06-25_14-17-36_thumb%25255B1%25255D.png?imgmax=800" width="460" height="196"></a></p><br /><h3>Transactions</h3><br /><p>Transactions ensure that every command of a set is executed. If anything fails along the way, all of the commands are rolled back like they never happened. It’s the <em>all or nothing</em> motto that gives relational databases its consistency capability.</p><br /><p>PostgreSQL transactions follow ACID compliance, which stands for <strong>A</strong>tomic (all ops succeed or none do), <strong>C</strong>onsistent (the data will always be in a good state—no inconsistent states), <strong>I</strong>solated (transactions don’t interfere), and <strong>D</strong>urable (a committed transaction is safe, even after a server crash). Transactions are useful when you’re modifying two tables that you don’t want out of sync.</p><br /><p>We can wrap any transaction within a BEGIN TRANSACTION block. To verify atomicity, we’ll kill the transaction with the ROLLBACK command.</p><br /><h3>Stored Procedures</h3><br /><p>Every command we’ve seen until now has been declarative (executed on the client side), but you can execute code on the database side also. Example of a stored procedure and how to run it:</p><pre class="prettyprint lang-sql">CREATE OR REPLACE FUNCTION add_event( title text, starts timestamp,<br />ends timestamp, venue text, postal varchar(9), country char(2) )<br />RETURNS boolean AS $$<br />DECLARE<br />did_insert boolean := false;<br />found_count integer;<br />the_venue_id integer;<br />BEGIN<br />SELECT venue_id INTO the_venue_id<br />FROM venues v<br />WHERE v.postal_code=postal AND v.country_code=country AND v.name ILIKE venue<br />LIMIT 1;<br />IF the_venue_id IS NULL THEN<br />INSERT INTO venues (name, postal_code, country_code)<br />VALUES (venue, postal, country)<br />RETURNING venue_id INTO the_venue_id;<br />did_insert := true;<br />END IF;<br />-- Note: not an “error”, as in some programming languages<br />RAISE NOTICE 'Venue found %', the_venue_id;<br />INSERT INTO events (title, starts, ends, venue_id)<br />VALUES (title, starts, ends, the_venue_id);<br />RETURN did_insert;<br />END;<br />$$ LANGUAGE plpgsql;<br /><br />SELECT add_event('House Party', '2012-05-03 23:00',<br />'2012-05-04 02:00', 'Run''s House', '97205', 'us');<br /></pre><br /><h3>Triggers</h3><br /><p>Triggers automatically fire stored procedures when some event happens, like an insert or update. They allow the database to enforce some required behavior in response to changing data. </p><br /><p>Let's create a function that logs any event changes into logs table. First we create the table</p><pre class="prettyprint lang-sql">CREATE TABLE logs (<br />event_id integer,<br />old_title varchar(255),<br />old_starts timestamp,<br />old_ends timestamp,<br />logged_at timestamp DEFAULT current_timestamp<br />);<br /></pre><br /><p>Next, we build a function to insert old data into the log. The OLD variable represents the row about to be changed (NEW represents an incoming row, which we’ll see in action soon enough). Output a notice to the console with the event_id before returning. Then we create our trigger to log changes after any row is updated through this function.</p><pre class="prettyprint lang-sql">CREATE OR REPLACE FUNCTION log_event() RETURNS trigger AS $$<br />DECLARE<br />BEGIN<br />INSERT INTO logs (event_id, old_title, old_starts, old_ends)<br />VALUES (OLD.event_id, OLD.title, OLD.starts, OLD.ends);<br />RAISE NOTICE 'Someone just changed event #%', OLD.event_id;<br />RETURN NEW;<br />END;<br />$$ LANGUAGE plpgsql;<br /><br />CREATE TRIGGER log_events<br />AFTER UPDATE ON events<br />FOR EACH ROW EXECUTE PROCEDURE log_event();<br /></pre><br /><p>To test our trigger let's update an event and see the trigger output:</p><br /><p><a href="http://lh4.ggpht.com/--mul5uWhb3U/UcodbOVl2vI/AAAAAAAABXc/XtjDgZ6NcT4/s1600-h/Query%252520-%252520book%252520on%252520postgres%252540localhost5432%252520_2013-06-25_15-58-53%25255B3%25255D.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Query - book on postgres@localhost5432 _2013-06-25_15-58-53" border="0" alt="Query - book on postgres@localhost5432 _2013-06-25_15-58-53" src="http://lh3.ggpht.com/-JyqtM7HmL0A/UcodbmfCwYI/AAAAAAAABXk/XnIk6PNAnCo/Query%252520-%252520book%252520on%252520postgres%252540localhost5432%252520_2013-06-25_15-58-53_thumb%25255B1%25255D.png?imgmax=800" width="444" height="171"></a></p><br /><p>and the old event was logged</p><br /><p><a href="http://lh4.ggpht.com/-A7hE-X2J8EE/Ucodb_ZivRI/AAAAAAAABXs/_DxkyeTaBbo/s1600-h/Query%252520-%252520book%252520on%252520postgres%252540localhost5432%252520_2013-06-25_16-00-49%25255B3%25255D.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Query - book on postgres@localhost5432 _2013-06-25_16-00-49" border="0" alt="Query - book on postgres@localhost5432 _2013-06-25_16-00-49" src="http://lh4.ggpht.com/-wgJFjjlMDYo/Ucodcf9sxwI/AAAAAAAABXw/VD8F1V3Tl1M/Query%252520-%252520book%252520on%252520postgres%252540localhost5432%252520_2013-06-25_16-00-49_thumb%25255B1%25255D.png?imgmax=800" width="453" height="105"></a></p><br /><h3>Views</h3><br /><p>Views are aliased queries that can be queried by its alias like any other table. Creating a view is as simple as writing a query and prefixing it with CREATE VIEW some_view_name AS. Views are good for opening up complex queried data in a simple way. If you want to add a new column to the view, it will have to come from the underlying table.</p><pre class="prettyprint lang-sql">CREATE VIEW holidays AS<br />SELECT event_id AS holiday_id, title AS name, starts AS date<br />FROM events<br />WHERE title LIKE '%Day%' AND venue_id IS NULL;<br /><br />SELECT name, to_char(date, 'Month DD, YYYY') AS date<br />FROM holidays<br />WHERE date &lt;= '2012-04-01';<br /></pre><br /><h3>The RULE system</h3><br /><p>The rule system (more precisely speaking, the query rewrite rule system) is totally different from stored procedures and triggers. It modifies queries to take rules into consideration, and then passes the modified query to the query planner for planning and execution. More information can be found <a href="http://www.postgresql.org/docs/8.2/static/rules.html" target="_blank">here</a>. Example of changing query to allow updating our holidays view:</p><pre class="prettyprint lang-sql">CREATE RULE update_holidays AS ON UPDATE TO holidays DO INSTEAD<br />UPDATE events<br />SET title = NEW.name,<br />starts = NEW.date<br />WHERE title = OLD.name;<br /><br />UPDATE holidays SET date = '6/25/2013' where name = 'Christmas Day';<br /></pre><br /><h3>Crosstab</h3><pre>crosstab(text source_sql, text category_sql) <font face="Arial">takes two queries to pivot results on one of them on the results of the other. </font></pre><br /><ul><br /><li><font face="Arial"><em>source_sql</em> is a SQL statement that produces the source set of data. This statement must return one row_name column, one category column, and one value column. It may also have one or more "extra" columns. The row_name column must be first. The category and value columns must be the last two columns, in that order.</font> <br /><li><em>category_sql</em> is a SQL statement that produces the set of categories. This statement must return only one column. It must produce at least one row, or an error will be generated. Also, it must not produce duplicate values, or an error will be generated.</li></ul><br /><p>If this is the first time you use something from the <a href="http://www.postgresql.org/docs/current/interactive/tablefunc.html" target="_blank">tablefunc module</a>, you may need to install it to your database by running <code><u>CREATE EXTENSION tablefunc;</u></code></p><pre class="prettyprint lang-sql">create table sales(year int, month int, qty int);<br />insert into sales values(2007, 1, 1000);<br />insert into sales values(2007, 2, 1500);<br />insert into sales values(2007, 7, 500);<br />insert into sales values(2007, 11, 1500);<br />insert into sales values(2007, 12, 2000);<br />insert into sales values(2008, 1, 1000);<br /><br />select * from crosstab(<br />  'select year, month, qty from sales order by 1',<br />  'select m from generate_series(1,12) m'<br />) as (<br />  year int,<br />  "Jan" int,<br />  "Feb" int,<br />  "Mar" int,<br />  "Apr" int,<br />  "May" int,<br />  "Jun" int,<br />  "Jul" int,<br />  "Aug" int,<br />  "Sep" int,<br />  "Oct" int,<br />  "Nov" int,<br />  "Dec" int<br />);<br /></pre><br /><h3>Full-Text Search</h3><br /><p>Full-text search enables the user to search text columns with parts of the column value, not the exact value like in regular queries.</p><br /><ul><br /><li><strong>LIKE and ILIKE</strong> : LIKE and ILIKE (case-insensitive LIKE) are the simplest forms of text search. LIKE compares column values against a given pattern string. The % and _ characters are wildcards. % matches any number of any characters, and _ matches exactly one character. <br /><ul><br /><li><font color="#0000ff">SELECT title FROM movies WHERE title ILIKE 'stardust%';</font> <br /><ul><br /><li><font color="#000000">will return movies with titles like : “Stardust” or “Stardust Memories”</font></li></ul></li></ul><br /><li><font color="#000000"><strong>Regex</strong> : You could write the WHERE part of your queries against text columns in regular expressions. A</font> regular expression match is led by the ~ operator, with the<br>optional ! (meaning, not matching) and * (meaning case insensitive). So, to count all movies that do not begin with the, the following case-insensitive query will work. The characters inside the string are the regular expression. <br /><ul><br /><li><font color="#0000ff">SELECT COUNT(*) FROM movies WHERE title !~* '^the.*';</font></li></ul><br /><li><font color="#000000"><strong>Bride of Levenshtein</strong> : </font>Levenshtein is a string comparison algorithm that compares how similar two strings are by how many steps are required to change one string into another. Each replaced, missing, or added character counts as a step (Changes in case cost a point too). The distance is the total number of steps away. levenshtein() function is provided by the <u>fuzzystrmatch</u> contrib package.The following query return 3 because we need to replace 2 characters and and add 1 character to make bat into fads. <br /><ul><br /><li><font color="#0000ff">SELECT levenshtein('bat', 'fads');</font></li></ul><br /><li><strong>Trigram</strong> :&nbsp; A trigram is a group of three consecutive characters taken from a string. The <u>pg_trgm</u> contrib module breaks a string into as many trigrams as it can. Finding a matching string is as simple as counting the number of matching trigrams. The strings with the most matches are the most similar. It’s useful for doing a search where you’re OK with either slight misspellings or even minor words missing. The longer the string, the more trigrams and the more likely a match. <br /><ul><br /><li><font color="#0000ff">SELECT show_trgm('Avatar');&nbsp; -- returns {" a"," av","ar ",ata,ava,tar,vat}</font></li></ul><br /><li>PostgreSQL have more natural language processing capabilities (<strong>TSVector</strong> and <strong>TSQuery</strong>) and even can search by word phonetics (<strong>metaphone</strong>) <br /><li>You could combine text search function in many interesting ways like the following query that “Get me names that sound the most like Robi n Williams, in order.” <br /><ul><br /><li><font color="#0000ff">SELECT * FROM actors<br>WHERE metaphone(name,8) % metaphone('Robin Williams',8)<br>ORDER BY levenshtein(lower('Robin Williams'), lower(name));</font></li></ul></li></ul><br /><p>&nbsp;</p><br /><p>In this post we introduced PostgreSQL, a popular open source RDBMS. In future posts we will introduce more DBMSs.</p>  