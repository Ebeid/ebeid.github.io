---
title: Get path conditions from Microsoft Pex
date: '2013-07-24T17:26:00.001-05:00'
author: Ebeid Soliman ElSayed
tags:
- Microsoft Pex
- Z3
modified_time: '2013-07-24T17:26:43.825-05:00'
thumbnail: http://lh6.ggpht.com/-svPbigDfUNI/UXlxRNQwHEI/AAAAAAAABKs/yu3AqbW3DKc/s72-c/ConsoleApplication2%252520-%252520Microsoft%252520Visual%252520Studio_2013-04-25_11-49-50_thumb%25255B2%25255D.jpg?imgmax=800
blogger_id: tag:blogger.com,1999:blog-59384554657271185.post-5936124692632596654
blogger_orig_url: http://ebeid-soliman.blogspot.com/2013/07/get-path-conditions-from-microsoft-pex.html
---

<p>We talked in a previous <a title="Why Pex Choose These Inputs" href="http://ebeid-soliman.blogspot.com/2013/04/why-pex-choose-these-inputs.html" target="_blank">post</a> about Microsoft Pex and how it choose values to explore your code through symbolically executing it and getting all its paths. A code path is the represented by all the conditions that have to be satisfied in order to make the code execution go to this path. Your code conditional statements will lead to different paths according to different input values. Test cases generated by Pex represents the code behavior for specific input values that lead to specific code path.</p> <p>Within the parameterized unit test You can use the method <strong>GetPathConditionString</strong> of the <strong>PexSymbolicValue</strong> class to obtain a textual representation of the current path condition, a predicate (condition) that characterizes an execution path (below, column with title Condition) .</p> <p><img title="ConsoleApplication2 - Microsoft Visual Studio_2013-04-25_11-49-50" border="0" alt="ConsoleApplication2 - Microsoft Visual Studio_2013-04-25_11-49-50" src="http://lh6.ggpht.com/-svPbigDfUNI/UXlxRNQwHEI/AAAAAAAABKs/yu3AqbW3DKc/ConsoleApplication2%252520-%252520Microsoft%252520Visual%252520Studio_2013-04-25_11-49-50_thumb%25255B2%25255D.jpg?imgmax=800" width="539" height="232"></p> <p>Methods <strong>ToRawString</strong> and <strong>GetRawPathConditionString</strong> of the <strong>PexSymbolicValue </strong>class return expressions representing symbolic values and the path condition, formatted as <a href="http://en.wikipedia.org/wiki/S-expression">S-expressions</a>.</p> <p>As we know, Pex uses the Z3 SMT solver behind the scenes. If you want to get the path conditions before being passed to Z3, do the following:</p> <ol> <li>Create an environment variable with name <strong>z3_logdir</strong> and value <strong>c:\z3_logdir</strong> (or any other directory you want)</li> <li>Create an environment variable with name <strong>z3_loglevel</strong> and value <strong>constraintsandmodel</strong> .</li></ol> <p>Now, Pex will create *.z3 files in subdirectories in the <em>z3_logdir</em> you specified in step 1. These files are in Z3 native format and can be later passed to Z3. For more information about this format, refer to <a title="Z3 native input format" href="http://research.microsoft.com/en-us/um/people/leonardo/z3_doc/group__z3native.html" target="_blank">Z3 online documentation</a>.</p> <p>In future posts we will talk more about the Z3 native format and what we can do with it.</p>
